<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="John Doe"><link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>完美升级Mac自带Python2.7~3.6 - Hexo</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">Hexo</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-02-13T08:48:42.000Z">February 13, 2018</time><h1 class="post__title"><a href="/2018/02/13/完美升级Mac自带Python/">完美升级Mac自带Python2.7~3.6</a></h1><div class="post__main echo"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote>
<p>Mac系统自带python2.7，本文目的是将自带的python升级到3.6版本。<br>网上有本多的做法是让python2.7和python3.X两个版本共存，博主并不知道，是两版本共存好，还是直接升级好，所以读者要慎重选择方法。</p>
</blockquote>
<blockquote>
<p>关闭Rootless机制<br>由于Mac下的python2.7 默认是安装在／System目录下的。但是～～～Mac有个Rootless机制，默认不允许直接在／System下作修改。所以要先关闭Rootless机制。</p>
</blockquote>
<h3 id="关闭Rootless机制的方法"><a href="#关闭Rootless机制的方法" class="headerlink" title="关闭Rootless机制的方法:"></a>关闭Rootless机制的方法:</h3><h4 id="关闭"><a href="#关闭" class="headerlink" title="关闭:"></a>关闭:</h4><ul>
<li>1）.重启电脑, 重启过程中按住command+R, 进入恢复模式 </li>
<li>2）.打开terminal，键入: csrutil disable </li>
<li>3）.重启电脑</li>
</ul>
<p>如果之后要再开启Rootless机制，方法如下： </p>
<h4 id="开启"><a href="#开启" class="headerlink" title="开启:"></a>开启:</h4><ul>
<li>1）.重启电脑, 重启过程中按住command+R, 进入恢复模式 </li>
<li>2）.打开terminal，键入: csrutil enable </li>
<li>3）.重启电脑</li>
</ul>
<h3 id="下载安装python3-6"><a href="#下载安装python3-6" class="headerlink" title="下载安装python3.6"></a>下载安装python3.6</h3><p>从<a href="https://www.python.org/downloads/" target="_blank" rel="noopener">官网</a><br>下载pkg版本，并安装。安装选默认路径，会安装到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Library/Frameworks/Python.framework/Versions/</span><br></pre></td></tr></table></figure>
<p>目录下</p>
<h3 id="删除python2-7"><a href="#删除python2-7" class="headerlink" title="删除python2.7"></a>删除python2.7</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -R /System/Library/Frameworks/Python.framework/Versions/2.7</span><br></pre></td></tr></table></figure>
<h3 id="移动python3-6"><a href="#移动python3-6" class="headerlink" title="移动python3.6"></a>移动python3.6</h3><p>将python3.6安装到/System/Library/Frameworks/Python.framework/Versions/</p>
<figure class="highlight plain"><figcaption><span>mv</span><a href="/Library/Frameworks/Python.framework/Versions/3.6">/System/Library/Frameworks/Python.framework/Versions</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">### 修改文件所属的Group</span><br><span class="line"></span><br><span class="line">设置Group为wheel，原来系统自带的就是这样的。</span><br></pre></td></tr></table></figure>
<p>sudo chown -R root:wheel /System/Library/Frameworks/Python.framework/Versions/3.6<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 更新一下Current的Link</span><br><span class="line"></span><br><span class="line">在Versions的目录里有一个Current的link，是指向当前的Python版本，原始是指向系统自带的Python2.7，我们把它删除后，link就失效了，所以需要重新链一下</span><br></pre></td></tr></table></figure></p>
<p>sudo rm /System/Library/Frameworks/Python.framework/Versions/Current<br>sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6 /System/Library/Frameworks/Python.framework/Versions/Current<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 重新链接可执行文件</span><br><span class="line"></span><br><span class="line">#### 先把系统原来的执行文件删掉</span><br></pre></td></tr></table></figure></p>
<p>sudo rm /usr/bin/pydoc<br>sudo rm /usr/bin/python<br>sudo rm /usr/bin/pythonw<br>sudo rm /usr/bin/python-config<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#### 建立新的链接</span><br></pre></td></tr></table></figure></p>
<p>sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/pydoc3.6 /usr/bin/pydoc<br>sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/python3.6 /usr/bin/python<br>sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/pythonw3.6 /usr/bin/pythonw<br>sudo ln -s /System/Library/Frameworks/Python.framework/Versions/3.6/bin/python3.6m-config /usr/bin/python-config<br><code>`</code></p>
<h4 id="更新-bash-profile文件"><a href="#更新-bash-profile文件" class="headerlink" title="更新.bash_profile文件"></a>更新.bash_profile文件</h4><p>默认的bash_profile里python的bin是指向/Library/Frameworks/Python.framework/Versions/3.6/<br>bin</p>
<p>的。要改到/System/目录下</p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>在命令行中，用pip -V和pip3 -V查看版本和位置。用python进入。<br>Mac下升级python2.7到python3.6，升级成功。</p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/Python/">Python</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 John Doe</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>